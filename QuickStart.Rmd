---
title: "Using the SpatialBall package"
author: "Derek Corcoran"
date: "`r Sys.Date()`"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(cache = TRUE)
```


The `SpatialBall` package was developed to visualize and analyze basketball data from the NBA, we will start by presenting several of our visualization functions, and later we will present our analysis tools

## Visualization Tools

### Season visualization tools:

We have two functions to plot all the shots of a Season, `ShotSeasonGraph` and `PointShotSeasonGraph` the later is not going to be shown in this vignette 

#### ShotSeasonGraph

This function make the classic shot charts developed by Kirk Goldsberry, the default shows an hexagon in each point of the court, the bigger the hexagons, the more frequent the shots are, and the smaller the hexagons the least frequent the shots are. Also the color scale, in this case, shows the points per shot.

```{r}
library(SpatialBall)
data("season2017")
ShotSeasonGraph(Seasondata = season2017)
```

for `ShotSeasonGraph` you have two options for the Type of graph, the default (Shown above) is Points per Shot, you can change that to *PCT* to see the shooting percentage:

```{r}
ShotSeasonGraph(Seasondata = season2017, type = "PCT")
```

another option for this function is the quantile threshold of which shots are plotted, the default is 0.4, that means that the 40% least common shots are not plotted, if we increase that number, less hexagons will be shown

```{r}
ShotSeasonGraph(Seasondata = season2017, type = "PCT", quant = 0.6)
```


### Team visualization tools:

Just as season visualization tools, you can choose to plot shot charts or shot every shot of the team, you have to add to these the team you want to plot the shot-chart of, for *Season2017* the code for the teams are `r unique(season2017$TEAM_NAME)`, since teams have changed names over time, for each season you should use the following code to check the names `unique(season2017$TEAM_NAME)`, changing season2017 for the season you want to plot.

#### OffShotSeasonGraphTeam

As an example for the shot charts we will shot for the 2017 season the shot charts for the Houston Rockets, and the Toronto Raptors:
```{r}
OffShotSeasonGraphTeam(season2017, team = "Hou")
OffShotSeasonGraphTeam(season2017, team = "Tor")
```

Again we can change the graph to Shooting percentage by changing type to *PCT*

```{r}
OffShotSeasonGraphTeam(season2017, team = "Hou", type = "PCT")
```

#### PointShotSeasonGraphTeam

If instead of a Shot-chart based on hexagons, you want to plot every shot as a single point, you can do that with *PointShotSeasonGraphTeam*, this divides shots in made and misses, also each shot has a high transparency (Alpha of 0.2 in ggplot), in order for areas of low density shots having less colors than the areas with more shots.

```{r}
PointShotSeasonGraphTeam(season2017, "Hou")
PointShotSeasonGraphTeam(season2017, "Tor")
```

### Player visualization tools:


You can enable figure captions by `fig_caption: yes` in YAML:

    output:
      rmarkdown::html_vignette:
        fig_caption: yes
        

Then you can use the chunk option `fig.cap = "Your figure caption."` in **knitr**.

## More Examples

You can write math expressions, e.g. $Y = X\beta + \epsilon$, footnotes^[A footnote here.], and tables, e.g. using `knitr::kable()`.

```{r, echo=FALSE, results='asis'}
data("season2017")
knitr::kable(head(season2017, 10))
```

Also a quote using `>`:

> "He who gives up [code] safety for [code] speed deserves neither."
([via](https://twitter.com/hadleywickham/status/504368538874703872))
